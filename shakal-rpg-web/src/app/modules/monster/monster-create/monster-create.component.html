<mat-horizontal-stepper linear #stepper>
    <mat-step [stepControl]="informacoesFormGroup">
        <form [formGroup]="informacoesFormGroup">
            <ng-template  matStepLabel>Informações</ng-template>
            <div class="row">
                    <mat-form-field class="form-group col-4" appearance="outline">
                            
                                    <mat-label>Tipo de criatura</mat-label>
                                    <mat-select formControlName="type">
                                        <mat-option *ngFor="let type of inputValues?.types" [value]="type.id">
                                            {{type.name}}
                                        </mat-option>
                                    </mat-select>
                                   
                    </mat-form-field>
                    <mat-form-field class="form-group col-4" appearance="outline">
                           
                                    <mat-label>Tamanho</mat-label>
                                    <mat-select formControlName="size">
                                        <mat-option *ngFor="let size of inputValues?.sizes" [value]="size.id">
                                            {{size.value}}
                                        </mat-option>
                                    </mat-select>
                                
                    </mat-form-field>
                    <mat-form-field class="form-group col-4" appearance="outline">
                            
                                    <mat-label>Alinhamento</mat-label>
                                    <mat-select formControlName="alignment">
                                        <mat-option *ngFor="let alignment of inputValues?.alignments" [value]="alignment.id">
                                            {{alignment.value}}
                                        </mat-option>
                                    </mat-select>
                                  
                    </mat-form-field>
            </div>
            <div class="row">
                <div class="col-md-6 col-sm-12">
                        <div class="form-group">
                               
                                <div class="card w-100 h-100">
                                    <img height="320"  class="card-img" src="{{ profilePicture}}" alt="">
                                </div>
                                <mat-form-field class="form-group col-12" appearance="outline">
                                        <mat-label>URL Foto</mat-label>
                                        <input matInput placeholder="Url imagem" [(ngModel)]="profilePicture" formControlName="profilePicture">
                                        
                                </mat-form-field>
                            </div>
                       
                </div>
                <div class="col-md-6 col-sm-12">
                    <mat-form-field class="form-group col-12" appearance="outline">
                            <mat-label>Nome</mat-label>
                            <input matInput placeholder="Descrição" formControlName="name">
                            <mat-error *ngIf="!informacoesFormGroup.controls['name'].valid && informacoesFormGroup.controls['name'].touched">
                                    Campo obrigatório
                            </mat-error>
                    </mat-form-field>
                    <mat-form-field class="form-group col-12" appearance="outline">
                            <mat-label>Descrição</mat-label>
                            <textarea matInput formControlName="description" matInput rows="13"></textarea>
                            <mat-error *ngIf="!informacoesFormGroup.controls['description'].valid && informacoesFormGroup.controls['description'].touched">
                                    Campo obrigatório
                            </mat-error>
                    </mat-form-field>
                   
                </div>
            </div>
            <div class="example-button-row float-right">
                <button mat-raised-button color="primary" matStepperNext>Próximo</button>
            </div>
        </form>
        </mat-step>
        <mat-step [stepControl]="habilitiesFormGroup">
            <form [formGroup]="habilitiesFormGroup">
                <ng-template  matStepLabel>Habilidades</ng-template>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <div class="row">
                            <mat-form-field class="form-group col-4" appearance="outline">
                                <mat-label>Classe de armadura</mat-label>
                                <input matInput placeholder="Classe de armadura" formControlName="armorClass">
                                <mat-error *ngIf="!habilitiesFormGroup.controls['armorClass'].valid && habilitiesFormGroup.controls['armorClass'].touched">
                                        Campo obrigatório
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field class="form-group col-4" appearance="outline">
                                <mat-label>Pontos de vida</mat-label>
                                <input matInput placeholder="Pontos de vida" formControlName="lifePoints">
                                <mat-error *ngIf="!habilitiesFormGroup.controls['lifePoints'].valid && habilitiesFormGroup.controls['lifePoints'].touched">
                                        Campo obrigatório
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field class="form-group col-4" appearance="outline">
                                <mat-label>Deslocamento</mat-label>
                                <input matInput placeholder="Deslocamento" formControlName="moviment">
                                <mat-error *ngIf="!habilitiesFormGroup.controls['moviment'].valid && habilitiesFormGroup.controls['moviment'].touched">
                                        Campo obrigatório
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-md-2 col-sm-4">
                                    <mat-form-field class="col-md-12" appearance="outline">
                                            <mat-label>Força</mat-label>
                                            <input  matInput formControlName="force" placeholder="Força">
                                            <mat-error *ngIf="!habilitiesFormGroup.controls['force'].valid && habilitiesFormGroup.controls['force'].touched">
                                                    Campo obrigatório
                                            </mat-error>
                                            
                                        </mat-form-field>
                                        <mat-checkbox formControlName="proeficientForce">Proeficiente</mat-checkbox>
                                       
                            </div>
                            
                            <div class="col-md-2 col-sm-4">
                                    <mat-form-field class="col-12" appearance="outline">
                                            <mat-label>Destreza</mat-label>
                                            <input matInput formControlName="dexterity" placeholder="Destreza">
                                            <mat-error *ngIf="!habilitiesFormGroup.controls['dexterity'].valid && habilitiesFormGroup.controls['dexterity'].touched">
                                                    Campo obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-checkbox formControlName="proeficientDexterity">Proeficiente</mat-checkbox>
                                      
                            </div>
                            
                            <div class="col-md-2 col-sm-4">
                                    <mat-form-field class="col-12" appearance="outline">
                                            <mat-label>Constituição</mat-label>
                                            <input matInput formControlName="constitution" placeholder="Constituição">
                                            <mat-error *ngIf="!habilitiesFormGroup.controls['constitution'].valid && habilitiesFormGroup.controls['constitution'].touched">
                                                    Campo obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-checkbox formControlName="proeficientConstitution">Proeficiente</mat-checkbox>
                                        
                            </div>
                            
                            <div class="col-md-2 col-sm-4">
                                    <mat-form-field class="col-12" appearance="outline">
                                            <mat-label>Inteligência</mat-label>
                                            <input matInput formControlName="inteligence" placeholder="Inteligência">
                                            <mat-error *ngIf="!habilitiesFormGroup.controls['inteligence'].valid && habilitiesFormGroup.controls['inteligence'].touched">
                                                    Campo obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-checkbox formControlName="proeficientInteligence">Proeficiente</mat-checkbox>
                                       
                            </div>
                            
                            <div class="col-md-2 col-sm-4">
                                    <mat-form-field class="col-12" appearance="outline">
                                            <mat-label>Sabedoria</mat-label>
                                            <input matInput formControlName="wisdom" placeholder="Sabedoria">
                                            <mat-error *ngIf="!habilitiesFormGroup.controls['wisdom'].valid && habilitiesFormGroup.controls['wisdom'].touched">
                                                    Campo obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-checkbox formControlName="proeficientWisdom">Proeficiente</mat-checkbox>
                                        
                            </div>
                            
                            <div class="col-md-2 col-sm-4">
                                    <mat-form-field class="col-12" appearance="outline">
                                            <mat-label>carisma</mat-label>
                                            <input matInput formControlName="charisma" placeholder="Carisma">
                                            <mat-error *ngIf="!habilitiesFormGroup.controls['charisma'].valid && habilitiesFormGroup.controls['charisma'].touched">
                                                    Campo obrigatório
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-checkbox formControlName="proeficientCharisma">Proeficiente</mat-checkbox>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="form-group col-md-6 col-sm-12">
                                <app-input-chip [placeholderComponent]="'Resisnência a dano'" (changeFunc)="changeDamageResistences($event)" [allElements]="inputValues.damageType"></app-input-chip>  
                            </div>
                            <div class="form-group col-md-6 col-sm-12">
                                <app-input-chip [placeholderComponent]="'Imunidade a dano'" (changeFunc)="changeDamageImunities($event)" [allElements]="inputValues.damageType"></app-input-chip>  
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="form-group col-md-6 col-sm-12">
                                <app-input-chip [placeholderComponent]="'Idiomas'" (changeFunc)="changeLanguages($event)"  [allElements]="inputValues.languages"></app-input-chip>  
                            </div>
                            <div class="form-group col-md-6 col-sm-12">
                                <mat-form-field appearance="outline" class="col-12">
                                <mat-label>Nível de desafio</mat-label>
                                <mat-select formControlName="level">
                                    <mat-option *ngFor="let level of inputValues?.levels" [value]="level.id">
                                        {{level.value}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="!habilitiesFormGroup.controls['level'].valid && habilitiesFormGroup.controls['level'].touched">
                                    Campo obrigatório
                                </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="example-button-row float-right">
                                
                                <button mat-raised-button color="primary" matStepperPrevious>Anterior</button>
                                <button mat-raised-button color="primary" matStepperNext>Próximo</button>
                        </div>
                       
                    </li>
                   
                </ul>
            </form>
        </mat-step>
        <mat-step [stepControl]="featuresFormGroup">
                <ng-template matStepLabel>Características</ng-template>
                <form [formGroup]="featuresFormGroup">
                    <div formArrayName="features">
                        <div *ngFor="let feature of featuresFormGroup.get('features').controls;  let i = index;">
                            <div [formGroupName]="i">
                                <mat-card>
                                    <mat-card-header>
                                        <mat-card-title>Característica {{i + 1}}</mat-card-title>
                                    </mat-card-header>
                                   
                                    <mat-card-content>
                                        
                                        <mat-form-field class="col-md-12" appearance="outline">
                                            <mat-label>Nome</mat-label>
                                            <input matInput formControlName="name" placeholder="Nome">
                                        </mat-form-field>
                                        <mat-form-field class="col-md-12" appearance="outline">
                                            <mat-label>Descrição</mat-label>
                                            <textarea matInput formControlName="description"  matInput ></textarea>
                                        </mat-form-field>
                                    </mat-card-content>
                                    <mat-card-actions>
                                            <button mat-raised-button color="warn" (click)="removeFeature(i)">remover</button>
                                    </mat-card-actions>
                                </mat-card>
                            </div>
                                
                        </div>    
                        
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-6">
                            <button mat-raised-button color="primary" (click)="addFeature()">Adcionar </button>
                        </div> 
                        <div class="col-6 example-button-row bottom-div float-right">           
                            <button mat-raised-button color="primary" matStepperPrevious>Anterior</button>
                            <button class="bottom-div float-right" mat-raised-button color="primary" matStepperNext>Próximo</button>
                        </div>
                    </div>
                    
                </form>
        </mat-step>        
        <mat-step>
          <ng-template  matStepLabel>Finalizar</ng-template>
          <div>
              <div class="row">
                <h3>Tem certeza?</h3>
              </div>
            <div class="row align-items-end">
                <button type="button" class="btn btn-success pull-right" matStepperPrevious>Back</button>
                <button type="button" class="btn btn-success pull-right" (click)="stepper.reset()">Reset</button>
                <button type="button" class="btn btn-success pull-right" (click)="onSubmit()">Finalizar</button>
            </div>                                  
          </div>
         
         
        </mat-step>
      </mat-horizontal-stepper>